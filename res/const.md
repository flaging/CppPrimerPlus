# [const]const的用法

## 1.const用于指针

在指针参数声明为指向常量数据的指针的理由有两条：

* 避免无意间修改了参数数值而导致程序错误
* 使用const能够处理const和非const的实参，而非const的形参只能传入非const的实参数据

const和指针的使用也分为两种，即：

* 指针指向const常量对象：指针内容不可修改
* 指针本身为const类型：指针和变量绑定，指针指向不可修改

### 1.1指针指向常量对象

使用方法如下

```C++
int var =10;
const int *pt = &var;
```

这里声明一个指针，但是这个指针在声明过程中说明了*pt是const类型的，故对于pt指针来说，这部分内容是不可更改的，但是，**可以通过var变量来更改这个量的值**。

指针的赋值方式有以下几种：

* 常规变量指针赋值给常规指针
* 常规变量指针赋值给const指针
* const变量赋值给const指针

第一种方法是常规用的方法，第二种和第三种是const指针的用法。需要额外注意的是，**不能将const指针赋值给常规指针**，因为一旦这么做了，const的效果就没有了，**实在需要这样做的时候可以采用强制类型转换**。

在指针指向指针的情形下，使用const会变得复杂。

* 一级间接关系（如上文）：可以将非const数据指向const指针
* 多级间接关系：const和非const的指针不能混合使用

**常量数组不能作为非常量形参的函数，这会破坏const指针不能赋值给常规指针的原则！！**

```C++
const int array[3] = {3,4,5};
int sum_1(int array[],int length);
int sum_2(const int array[],int length);
sum_1(array,3);  //不允许，违反上文规则
sum_2(array,3);  //应该是可行的
```

## 1.2常指针

即指针本身为常量，指针指向固定。

```C++
int var2 = 11;
cosnt int *pt2 = &var2;  //指向常量的指针
int * const pt3 = &var2;  //常指针
```

这里常指针是指指向固定，但其内容可以进行修改，即可以通过*pt3来修改var2的值。

## 1.3指向常量的常指针

即将以上两种方式结合起来。

```C++
int var3 = 12;
const int * const pt4 = &var3;
```
