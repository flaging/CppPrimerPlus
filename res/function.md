# [function]函数的使用

## 1.函数的使用过程

* 函数的声明：说明函数的输入输出及函数名
* 函数的定义：函数功能的具体实现
* 函数的使用：给函数传参，调用函数

一个函数有四个要素，分别是：

* 函数名：通常与功能相一致
* 输入参数：通常以参数表的形式向函数传参
* 返回值：有些函数需要具体返回某一值
* 函数体：由一些语句组成的能够实现一定功能的语句块

```C++
//函数的声明
double cube(double x);
int main(){
    //函数的调用
    double volume = cube(10);
}
//函数的定义
double cube(double x){
    return x*x*x;
}
```

这里，函数的声明是为说明该函数的基本接口信息，提高效率。函数的返回值通常是要保存在具体的寄存器或者内存中，声明后的函数可以告诉编译器该返回值是个什么结构的内容，防止出错。

函数的声明可以保证：

* 编译器返回值正确
* 使用参数的数目正确
* 使用参数的类型正确

## 2.函数参数的传递方式

* 值传递
* 数组传递
* 指针传递
* 结构体传递

函数有两种参数：形参(parameter)和实参(argument)，参数传递就是实参向形参传递的过程。通常形参是函数执行过程中的一个局部变量。

### 2.1函数的值传递

值传递的含义是指函数的实参就是一个（或者多个）值。

```C++
double volume = cube(1);
```

### 2.函数的数组传递

**数组中没有值传递！**

```C++
//声明过程
int sum(int array[], int length);
```

实际上，这种声明是不可能的，数组传递的最终实现是以指针传递的方式进行的。在程序内部，可以将array作为数组，也可以将其作为指针使用。

同时，要注意的是：

* <b> 在数组、指针传递的过程中，传递的是地址，而不是数组的拷贝。</b>

* 可以使用const关键字来保护数组。(在值传递过程中不会出现该问题，因为值传递方式使用的是拷贝)

```C++
int sum(const int array[],int length);  //该声明说明指针指向的是常量数据
```

* 在函数传递过程中，数组的长度信息会丢失，函数内部无法再使用sizeof()函数来获取数组的大小，只能使用length进行传参。

* 另一种数组传参方式是使用函数的头和尾部

```C++
int array[20];
int sum(const int begin[], const int end);  //这里，可以调用sum(array,array+20)，这里的end是超尾，即尾部的后一个位置
```

## 3.函数的二维数组传递

要注意的是，**二维数组是一个以数组指针为元素的数组**。

```C++
int data[3][4] = {
    {1,2,3,4},
    {2,3,4,5},
    {3,4,5,6}
};
int total = sum(data,3);
```

这里，函数sum的声明应该为

```C++
int sum(int arr[][4], int size);  //二维数组名作为形参
int sum((*arr)[4],int size);  //一维数组指针作为形参
int sum(int (&arr)[3][4]);  //二维数组引用作为形参
int sum(int (*arr)[3][4]);  //二维数组指针作为参数
```

这样的二维数组作为形参的声明将二维数组的第二维限定在了4列，可以处理所有4列的二维数组，这也是列数不用作为传入参数的一个原因。

而且二维数组中有

```C++
arr[x][y] = *(*(arr + x) + y);  //两者等价
```

还可以用[取巧的方法](https://github.com/liyupeng341/CppPrimerPlus/blob/master/res/array.md#5%E4%BA%8C%E7%BB%B4%E6%95%B0%E7%BB%84%E5%81%9A%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0)进行二维数组传递。
